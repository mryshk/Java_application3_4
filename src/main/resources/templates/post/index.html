<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title th:text="${title}">Insert title here</title>
</head>
<body>
  <h2 th:text="${heading}">見出し</h2>
  <p th:if="${complete}" th:text="${complete}"></p>
  <form method="POST" th:action="${postForm.newPost}? @{/post/insert} : @{/post/update}" th:object="${postForm}">
    <label>楽曲：</label>
    <input type="text" name="music_name" th:value="*{music_name}">
    <div th:if="${#fields.hasErrors('music_name') }" th:errors="*{music_name}" ></div>
    <label>アーティスト名：</label>
    <input type="text" name="artist_name" th:value="*{artist_name}">
    <div th:if="${#fields.hasErrors('artist_name')}" th:errors="*{artist_name}"></div>
    <label>ジャンル：</label>
    <select name="genreId">
      <option value="1" th:selected="*{genreId == 1}">ROCK</option>
      <option value="2" th:selected="*{genreId == 2}">JPOP</option>
      <option value="3" th:selected="*{genreId == 3}">HIPHOP</option>
      <option value="4" th:selected="*{genreId == 4}">KPOP</option>
      <option value="5" th:selected="*{genreId == 5}">EDM</option>
    </select></br>
    <div th:if="${#fields.hasErrors('genreId')}" th:errors="${genreId}"></div>
    <label>説明文：</label>
    <textarea name="caption" id="caption" rows="3" cols="40" th:field="*{caption}"></textarea><br>
    <div th:if="${#fields.hasErrors('caption')}" th:errors="*{caption}"></div>
    <input th:if="${postId}" type="hidden" name="postId" th:value="${postId}">
    <input type="submit" value="投稿">
  </form>
  
  
  
  
  <div th:if="${postForm.newPost}" style="margin:10px">
  <h3>投稿　編集削除</h3>
  <table>
    <tr th:each="obj : ${list}">
      <td th:text="${obj.music_name}"></td>
      <td th:text="${obj.artist_name}"></td>
      <td th:text="${obj.genreType.genre}"></td>
      <td th:text="${obj.caption}"></td>
      <td th:text="${obj.created}"></td>
      <td><a type="button" th:href="@{/post/{id}(id=${obj.id})}">編集</a></td>
      <td>
        <form method="POST" th:action="@{post/delete}">
          <input type="hidden" name="postId" th:value="${obj.id}">
          <input type="submit" value="削除">
        </form>
      </td>
    </tr>
  </table>
  </div>
  <br>
  <p th:unless="${postForm.newPost}"><a href="#" th:href="@{/post}">戻る</a></p>
  
  
  
</body>
</html>